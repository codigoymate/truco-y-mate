/**
 * @file mainframe.cpp
 * @author Javier Candales (codigo.mate.9@gmail.com)
 * @brief Frame dónde se aloja el título y el menú principal.
 * @date 2024-03-31
 * 
 * @copyright Copyright (c) 2024
 * 
 */
#include <components/start_frame.h>
#include <components/game_frame.h>

#include <truco.h>

namespace truco {

StartFrame::StartFrame() : TCurses::Frame() {}

/**
 * @brief Al iniciar el frame.
 * 
 */
void StartFrame::init() {
	this->setLayout(TCurses::LY_VERTICAL);

	// Título
	auto title = std::make_shared<TCurses::Art>(std::vector<unsigned int>({
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x501371, 0x501371, 0x501371, 0x501377, 0x501377, 
0x501371, 0x501371, 0x501371, 0x0000, 0x50136C, 0x501377, 0x501371, 0x501371, 0x501371, 0x501371, 0x50136B, 0x0000, 0x0000, 0x501378, 0x501378, 0x0000, 
0x0000, 0x0000, 0x0000, 0x501378, 0x501378, 0x0000, 0x0000, 0x50136C, 0x501371, 0x501371, 0x501371, 0x501371, 0x501371, 0x0000, 0x0000, 0x50136C, 
0x501371, 0x501371, 0x501371, 0x501371, 0x50136B, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x501378, 0x501378, 0x0000, 0x0000, 0x0000, 
0x0000, 0x501378, 0x501378, 0x0000, 0x0000, 0x0000, 0x0000, 0x501378, 0x501378, 0x0000, 0x501378, 0x501378, 0x0000, 0x0000, 0x0000, 0x0000, 
0x501378, 0x501378, 0x0000, 0x50136C, 0x501375, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x50136C, 0x501375, 0x0000, 0x0000, 0x0000, 
0x0000, 0x501374, 0x50136B, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x501C78, 0x501C78, 0x0000, 0x0000, 0x0000, 0x0000, 0x501C78, 0x501C74, 
0x501C71, 0x501C71, 0x501C71, 0x501C77, 0x501C75, 0x0000, 0x0000, 0x501C78, 0x501C78, 0x0000, 0x0000, 0x0000, 0x0000, 0x501C78, 0x501C78, 0x0000, 
0x501C78, 0x501C78, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x501C78, 0x501C78, 0x0000, 0x0000, 0x0000, 0x0000, 0x501C78, 0x501C78, 
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x501C78, 0x501C78, 0x0000, 0x0000, 0x0000, 0x0000, 0x501C78, 0x501C78, 0x0000, 0x0000, 0x0000, 
0x501C6D, 0x501C75, 0x0000, 0x0000, 0x501C6D, 0x501C75, 0x0000, 0x0000, 0x0000, 0x0000, 0x501C74, 0x501C6A, 0x0000, 0x501C6D, 0x501C75, 0x0000, 
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x501C6D, 0x501C75, 0x0000, 0x0000, 0x0000, 0x0000, 0x501C74, 0x501C6A, 0x0000, 0x0000, 0x0000, 
0x0000, 0x0000, 0x501C6D, 0x501C6A, 0x0000, 0x0000, 0x0000, 0x0000, 0x501C6D, 0x501C6A, 0x0000, 0x0000, 0x0000, 0x0000, 0x501C6D, 0x501C71, 
0x0000, 0x0000, 0x501C6D, 0x501C71, 0x501C71, 0x501C71, 0x501C71, 0x501C6A, 0x0000, 0x0000, 0x0000, 0x501C6D, 0x501C71, 0x501C71, 0x501C71, 0x501C71, 
0x501C71, 0x0000, 0x0000, 0x501C6D, 0x501C71, 0x501C71, 0x501C71, 0x501C71, 0x501C6A, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x200741, 0x0000, 0x200752, 0x0000, 0x200747, 0x0000, 0x200745, 0x0000, 0x20074E, 0x0000, 
0x200754, 0x0000, 0x200749, 0x0000, 0x20074E, 0x0000, 0x20074F, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000	}), 45, 11);
	title->setHAlign(TCurses::HA_CENTER);
	this->addChild(title);

	mainMenu = std::make_shared<TCurses::Menu>();
	mainMenu->setMaxW(20); mainMenu->setMaxH(5);
	mainMenu->setBorder(std::make_shared<TCurses::LinedBorder>(1));
	mainMenu->setHAlign(TCurses::HA_CENTER);
	this->addChild(mainMenu);

	mainMenu->addChild(std::make_shared<TCurses::MenuItem>("Uno contra uno", std::bind(&StartFrame::twoPlayersGame, this)));
	mainMenu->addChild(std::make_shared<TCurses::MenuItem>("Dos contra dos", std::bind(&StartFrame::fourPlayerGame, this)));
	mainMenu->addChild(std::make_shared<TCurses::MenuItem>("Tres contra tres", std::bind(&StartFrame::sixPlayerGame, this)));
	mainMenu->addChild(std::make_shared<TCurses::MenuItem>("Opciones"));
	mainMenu->addChild(std::make_shared<TCurses::MenuItem>("Salir", std::bind(&StartFrame::quitAction, this)));

}

/**
 * @brief Al seleccionar "Salir" en el menú principal.
 * 
 */
void StartFrame::quitAction() {
	application->quit();
}

/**
 * @brief Al seleccionar "Uno contra uno."
 * 
 */
void StartFrame::twoPlayersGame() {
	application->getScreen()->removeChildren();
	application->getScreen()->addChild(std::make_shared<GameFrame>(2));
}

/**
 * @brief Al seleccionar "Dos contra dos."
 * 
 */
void StartFrame::fourPlayerGame() {
	application->getScreen()->removeChildren();
	application->getScreen()->addChild(std::make_shared<GameFrame>(4));
}

/**
 * @brief Al seleccionar "Tres contra tres."
 * 
 */
void StartFrame::sixPlayerGame() {
	application->getScreen()->removeChildren();
	application->getScreen()->addChild(std::make_shared<GameFrame>(6));
}

} // namespace truco
